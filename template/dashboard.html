<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Growtopia - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <style>
      .active-tab {
        border-bottom: 4px solid #81d4fa;
        color: white;
      }
      .inactive-tab {
        color: #87b8cc;
      }
    </style>
  </head>

  <body class="flex flex-col items-center justify-center h-screen bg-[#1a2e3e]">
    <div class="fixed inset-0 flex justify-center items-start pt-8">
      <div
        id="mainModal"
        class="relative bg-[#2b4d6d] border-4 border-[#87b8cc] shadow-lg p-6 w-3/5 max-w-lg sm:w-4/5 xs:w-11/12 min-h-[350px] rounded-lg flex flex-col opacity-0 translate-y-[-20px] transition-all duration-700 ease-out"
      >
        <div class="flex justify-around mb-4 border-b border-[#87b8cc]/30">
          <button
            id="tabLogin"
            class="pb-2 font-bold uppercase tracking-wider active-tab transition-all"
          >
            Login
          </button>
          <button
            id="tabRegister"
            class="pb-2 font-bold uppercase tracking-wider inactive-tab transition-all"
          >
            Register
          </button>
        </div>

        <div
          id="errorDiv"
          class="hidden flex flex-col mb-2 text-xs text-red-400 font-bold px-2 py-1 bg-black/20 rounded border border-red-400/50"
        >
          <span id="errorMessage"></span>
        </div>

        <form
          method="post"
          action="/player/growid/login/validate"
          id="loginForm"
          class="space-y-3"
        >
          <input name="type" value="log" type="hidden" />
          <input name="_token" value="{{ data }}" type="hidden" />

          <div>
            <label class="block text-white text-xs mb-1">GrowID</label>
            <div
              class="flex items-center border-2 border-[#81d4fa] rounded bg-[#2b4d6d] px-2 py-1"
            >
              <i class="fas fa-user text-white mr-2 text-xs"></i>
              <input
                type="text"
                name="growId"
                id="loginGrowId"
                class="w-full bg-transparent text-white text-xs focus:outline-none"
                placeholder="Enter GrowID"
              />
            </div>
          </div>

          <div>
            <label class="block text-white text-xs mb-1">Password</label>
            <div
              class="flex items-center border-2 border-[#81d4fa] rounded bg-[#2b4d6d] px-2 py-1"
            >
              <i class="fas fa-lock text-white mr-2 text-xs"></i>
              <input
                type="password"
                name="password"
                id="loginPassword"
                class="w-full bg-transparent text-white text-xs focus:outline-none"
                placeholder="Enter Password"
              />
              <button
                type="button"
                class="togglePassword text-white ml-2 text-xs"
              >
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>

          <div class="flex justify-end pt-2">
            <button
              id="loginButton"
              class="px-6 py-2 rounded bg-[#00b8ff] text-white text-xs font-bold hover:bg-[#06a4dd] transition transform hover:scale-105"
            >
              LOG IN
            </button>
          </div>
        </form>

        <form
          method="post"
          action="/player/signup"
          id="registerForm"
          class="hidden space-y-3"
        >
          <input name="type" value="reg" type="hidden" />

          <div>
            <label class="block text-white text-xs mb-1">Desired GrowID</label>
            <div
              class="flex items-center border-2 border-[#81d4fa] rounded bg-[#2b4d6d] px-2 py-1"
            >
              <i class="fas fa-user-plus text-white mr-2 text-xs"></i>
              <input
                type="text"
                name="growId"
                id="regGrowId"
                class="w-full bg-transparent text-white text-xs focus:outline-none"
                placeholder="Choose a name"
              />
            </div>
          </div>

          <div>
            <label class="block text-white text-xs mb-1"
              >Email (Optional)</label
            >
            <div
              class="flex items-center border-2 border-[#81d4fa] rounded bg-[#2b4d6d] px-2 py-1"
            >
              <i class="fas fa-envelope text-white mr-2 text-xs"></i>
              <input
                type="email"
                name="email"
                class="w-full bg-transparent text-white text-xs focus:outline-none"
                placeholder="email@example.com"
              />
            </div>
          </div>

          <div>
            <label class="block text-white text-xs mb-1">Password</label>
            <div
              class="flex items-center border-2 border-[#81d4fa] rounded bg-[#2b4d6d] px-2 py-1"
            >
              <i class="fas fa-lock text-white mr-2 text-xs"></i>
              <input
                type="password"
                name="password"
                id="regPassword"
                class="w-full bg-transparent text-white text-xs focus:outline-none"
                placeholder="Create password"
              />
            </div>
          </div>

          <div>
            <label class="block text-white text-xs mb-1"
              >Confirm Password</label
            >
            <div
              class="flex items-center border-2 border-[#81d4fa] rounded bg-[#2b4d6d] px-2 py-1"
            >
              <i class="fas fa-lock text-white mr-2 text-xs"></i>
              <input
                type="password"
                name="confirmPassword"
                id="regConfirmPassword"
                class="w-full bg-transparent text-white text-xs focus:outline-none"
                placeholder="Confirm password"
              />
            </div>
          </div>

          <div class="flex justify-end pt-2">
            <button
              id="registerButton"
              class="px-6 py-2 rounded bg-[#4caf50] text-white text-xs font-bold hover:bg-[#43a047] transition transform hover:scale-105"
            >
              CREATE ACCOUNT
            </button>
          </div>
        </form>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const modal = document.getElementById("mainModal");
        const tabLogin = document.getElementById("tabLogin");
        const tabRegister = document.getElementById("tabRegister");
        const loginForm = document.getElementById("loginForm");
        const registerForm = document.getElementById("registerForm");
        const errorDiv = document.getElementById("errorDiv");

        // Initial Animation
        setTimeout(() => {
          modal.classList.remove("opacity-0", "translate-y-[-20px]");
        }, 100);

        // Tab Switching Logic
        tabLogin.addEventListener("click", () => {
          tabLogin.className =
            "pb-2 font-bold uppercase tracking-wider active-tab transition-all";
          tabRegister.className =
            "pb-2 font-bold uppercase tracking-wider inactive-tab transition-all";
          loginForm.classList.remove("hidden");
          registerForm.classList.add("hidden");
          errorDiv.classList.add("hidden");
        });

        tabRegister.addEventListener("click", () => {
          tabRegister.className =
            "pb-2 font-bold uppercase tracking-wider active-tab transition-all";
          tabLogin.className =
            "pb-2 font-bold uppercase tracking-wider inactive-tab transition-all";
          registerForm.classList.remove("hidden");
          loginForm.classList.add("hidden");
          errorDiv.classList.add("hidden");
        });

        // Password Toggle
        document.querySelectorAll(".togglePassword").forEach((btn) => {
          btn.addEventListener("click", function () {
            const input = this.previousElementSibling;
            const type =
              input.getAttribute("type") === "password" ? "text" : "password";
            input.setAttribute("type", type);
            this.innerHTML =
              type === "password"
                ? '<i class="fas fa-eye"></i>'
                : '<i class="fas fa-eye-slash"></i>';
          });
        });

        // Basic Validation for Login
        document
          .getElementById("loginButton")
          .addEventListener("click", function (e) {
            e.preventDefault();
            const user = document.getElementById("loginGrowId").value;
            const pass = document.getElementById("loginPassword").value;

            if (user.length < 4 || pass.length < 4) {
              showError("ID and Password must be at least 4 characters.");
            } else {
              localStorage.setItem("growId", user);
              loginForm.submit();
            }
          });

        function showError(msg) {
          errorDiv.classList.remove("hidden");
          document.getElementById("errorMessage").innerText = msg;
        }

        // Fill saved GrowID
        if (localStorage.getItem("growId")) {
          document.getElementById("loginGrowId").value =
            localStorage.getItem("growId");
        }
      });
    </script>
  </body>
</html>
